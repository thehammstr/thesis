% !TEX root = ../Thesis.tex

\chapter{Related Work}
\label{ch.RelatedWork}

\subsection{Iceberg Profiling}

A number of methods exist for generating shape estimates of free-drifting icebergs. They can be broken down roughly by the type of data used to produce the method: aerial measurements, ship-based measurements including tethered vehicles, and untethered underwater vehicle (UUV) based measurements.

\subsubsection{Aerial Iceberg Profiling}

Aircraft are used extensively in tracking and managing icebergs. Coast Guards and Navies of several nations regularly patrol Arctic and Antarctic waters to detect and track icebergs that might pose a threat to infrastructure or shipping. While this provides an effective means of tracking icebergs' positions over time, it says relatively little about the iceberg's structure. The aircraft are sometimes equipped with LIDAR range scanners [\cite{?}], but most often the only measurements available are photographs. From this, rough classification of iceberg type based on sail shape (such as ``drydock," ``pinnacle," or ``blocky" ) is possible. Additionally, keel depth can be estimated heuristically based on maximum waterline length, and decay rate can be inferred from repeated sightings, as shown in \cite{OceansLTD2004}. However, all of these are only first-order approximations of shape; aerial imagery cannot provide detailed iceberg shape profiles. 

\subsubsection{Ship-based Iceberg Profiling}

A number of companies use ship-based measurement to profile icebergs. These methods comprise both above-water and below-water observations, yielding a full shape reconstruction of both the sail and keel of the iceberg. 

Above-water measurements include radar, lidar, and image-based techniques. Lidar-based approaches can provide dense point cloud measurements of the iceberg's sail, yielding a very high resolution reconstruction. An added benefit of this sensing method is that the lidar point clouds have sufficient overlap in the ship's direction of travel to directly measure the iceberg's motion, as shown in \ref{fig:LidarOdometry}. This method is also used in ship-hull inspection, as in \cite{Singapore} where the scan matching provided such accurate hull-relative odometry that the inertial measurements were essentially ignored, and the position estimate from the lidar was used to project sonar measurements to create the keel portion of the map.

To map the keel, multibeam or sidescan sonar is typically used. For very large icebergs, surface-based observation can be insufficient to measure deeper portions of the keel. Tethered ROVs or tow bodies outfitted with sonar can be used to access the lower parts, and even the bottom of the keel, but drive up the cost and complexity of the operation, and can put expensive assets at risk. 

The ability to make simultaneous observations of the iceberg both above and below the surface, combined with the differences in available sensing in these two media, allows the iceberg motion to be measured directly, simplifying the task of resolving the data into the moving reference frame. This is the chief advantage of surface-based measurement techniques. Disadvantages include high cost, risks involved in operating close to icebergs, and the inability to profile deep portions of the iceberg. Using a sonar-equipped tow body or ROV can allow access to deep portions of the keel, but can drive up cost and complexity of the operation. 

\begin{figure}[htbp]
   \centering
   \includegraphics[scale=.4]{../graphics/placeKitten1.jpeg} % requires the graphicx package
   \caption{Transverse-mounted multibeam sonar provides wide-swath coverage but does not overlap between timesteps, so cannot be used to estimate heading change and distance traveled in the iceberg frame of reference. Scanning lidar provides dense, overlapping point clouds that can be registered through scan matching to provide iceberg-relative odometry. }
   \label{fig:LidarOdometry}
\end{figure}

\subsubsection{AUV-based Iceberg Profiling}

Several efforts have investigated the use of AUVs for iceberg profiling. These have been motivated in large part by AUVs' low operational cost relative to ROVs and ship-based methods. Additionally, AUVs could enable some missions that would simply be infeasible for ROVs, such as mapping very large icebergs, or ice islands. 

Zhou et. al. have investigated using Slocum Glider vehicles to profile icebergs between Greenland and Newfoundland and Labrador. \cite{Zhou2014}. Icebergs there are prevalent, and pose risk to offshore oil installations and shipping. Gliders show promise as a low-cost data collection platform to aid in iceberg management, but their low power and control authority constraints limit their achievable resolution. However cooperative efforts with autonomous surface vehicles show great potential for improving this [\cite{}]. The focus of this work has been developing a control strategy for the glider, given its motion constraints, that allows application to iceberg profiling. It assumes that the iceberg's motion can be adequately described purely with translation. This assumption is likely valid for the relatively small size of iceberg the researchers are interested in, and the time required to map them, but breaks down for much larger icebergs. Additionally, the vehicle dynamic, sensing, and power constraints make a difficult to perform a direct comparison between their methods and the one presented in this dissertation. 

 Kimball and Rock presented a method for creating high-resolution maps of free-drifting icebergs using AUVs in [\cite{Kimball2011}]. The work uses offline optimization to estimate the iceberg's translation and rotation during the course of the mapping run. It models these motion parameters using B-splines \cite{} to enforce smooth, physical motion. The optimization problem is broken up into linear and nonlinear portions and solved in an iterative least squares framework, as shown in Figure \ref{fig:NestedLoopRelatedWork}. The method was demonstrated on field data from an Antarctic iceberg collected by ship-based sonar, as well as bathymetric data recorded by an AUV. While it provided accurate, self-consistent map sections based on constant depth swaths of data, the algorithm suffered from scalability issues. Multiple swaths of data were required to build up a map of the entire iceberg, and errors in the motion model between the swaths could cause map artifacts or ``seams" that could make later use for robotic navigation difficult. Additionally, the method was computationally intensive, and required subsampling of data for the optimization to converge in a reasonable amount of time. Furthermore, the method relied on having an estimate of the vehicle's inertial position, which was supplied to it via ship-based USBL link. The need to tend the vehicle to provide these navigation fixes places an operational burden on the ship, when a more autonomous solution could free it to do other science. This dissertation uses Kimball's method as a foundation, and makes a number of improvements to address these issues. 

\begin{figure}[htbp]
   \centering
   \includegraphics[scale=.4]{../graphics/KimballIterativeOpt.png} % requires the graphicx package
   \caption{Iterative optimization structure employed by Kimball. The nonlinear heading parameters $\psi$ are chosen in the outer loop and fed to the inner loop as constants. $\hat{\bar{x}}_{ls}$ is a vector of O(10) motion parameters and O(1000) iceberg-fixed points to be estimated at each optimization step  \emph{Graphic courtesy of Peter Kimball}}
   \label{fig:NestedLoopRelatedWork}
\end{figure}

\section{Simultaneous Localization and Mapping}

\subsection{Brief Overview of SLAM}

As discussed in the introduction, accurate robotic mapping of an environment relies on accurate localization of the robot within that environment. Hence, robot localization and mapping are inextricably linked. A family of techniques, which has collectively come to be called Simultaneous Localization and Mapping, or SLAM, simply makes that link explicit. 

A wide variety of SLAM techniques have been developed and applied to mapping tasks in countless environments with all types of vehicles. A detailed enumeration of these could fill many volumes, and is well beyond the scope of this document, but for a good summary, the reader is encouraged to refer to \cite{SLAMoverview}. While each method has its own nuances, these methods can broadly be categorized along a few axes, based on data representation and solution methods. 

One distinguishing feature of a method is whether it runs online or offline. EKF SLAM uses a Gaussian representation to run online, while GraphSLAM is applied after all data has been collected to solve for trajectory and map in one large batch process [\cite{},\cite{}]. Some methods, such as FastSLAM, can be applied both online and offline \cite{FastSLAM}.

A second difference between SLAM methods involves how the method represents the map. Some methods use a ``feature based" approach, where the map is composed of discrete, identifiable units whose positions are estimated. \cite{?}. Other methods are non-feature based, using other means to represent the map. An example of this is occupancy grid mapping, where the environment is discretized, and each discrete region is assigned a ``probability of occupancy." In other words, how likely it is that a position contains something solid, based on observations over time.  A third type of SLAM does not explicitly represent the map at all, but uses information in the environment to impose relative pose constraints between parts of the robot's trajectory. These methods are often not classified as SLAM, since the map itself is not one of the optimization variables. However, since terrain observations are used to generate localization estimate,  the localization portion and mapping portion cannot be decoupled, and these methods can indeed be thought of as SLAM. 

This dissertation uses the GraphSLAM algorithm \cite{} to provide an offline estimate of iceberg shape. This will be developed fully in Chapter \ref{ch.GraphSLAM}. A feature-based variant as well as a mapless or implicit-map variant will be given, and it will be shown that the two are equivalent under certain assumptions. 

\subsection{SLAM in Underwater Environments}

SLAM has been used in a number of underwater applications, using many different sensing modalities. Fairfield et. al. mapped naturally-occuring cenotes in Mexico using an efficient occupancy-based SLAM technique \cite{Fairfield...}. A number of efforts have aimed at performing SLAM in structured or manmade underwater environments like dams and marinas \cite{Ribas}. In shallow, highly textured environments like coral reefs, a number of image-based SLAM implementations have been successful [\cite{?}].

As mentioned above, most bathymetric mapping tasks, while not always referred to as SLAM, use terrain correspondence to estimate and correct navigation errors and can therefore be classified as SLAM implementations \cite{anything by Caress}. The AUVs are pre-programmed to fly self-intersecting trajectories, and have accurate enough inertial guidance as to guarantee sufficient overlap. Thus the correspondence problem is solved automatically. Submaps are extracted and correlated to estimate drift, and the trajectory is altered in such a way as to distribute the error as unobtrusively as possible, while driving the measured drift to zero.

 \begin{figure}[htbp]
   \centering
   \includegraphics[scale=.4]{../graphics/placeKitten1.jpeg} % requires the graphicx package
   \caption{Depiction of normal bathymetric mapping procedure (lawnmower pattern)}
   \label{fig:BathyMapping}
\end{figure}


\section{Data Correspondence and Correlation}

!!!! SHOULD THIS BE A SUBSECTION OF SLAM? !!!!

SLAM methods generally rely on identifying loop closure events, where an area is revisited after a long interlude. Multiple observations of recognizable features are then compared, and any discrepancy in their estimated location can be used to correct navigational error in the robot's trajectory. The first part of this process, often referred to as the \emph{correspondence} problem, involves determining that two or more measurements correspond to observations of the same feature or area in the environment. Data \emph{correlation} then aims to resolve any discrepancies between the multiple observations by modifying the trajectory estimate. Determining relative weights between odometry errors incurred by these modifications and observation discrepancies is highly application-specific, as are the methods used to solve the correspondence and correlation problems. These are separate but coupled tasks: if the method used for correlation is very robust to outliers, the correspondence problem need not be overly discriminative. However, if the correlation method is sensitive to initial conditions or false correspondences, the correspondence must to a better job of rejecting bad matches. 

 \begin{figure}[htbp]
   \centering
   \includegraphics[scale=.4]{../graphics/placeKitten1.jpeg} % requires the graphicx package
   \caption{Loop Closure Defined Pictorially}
   \label{fig:LoopClosure}
\end{figure}

\subsection{Scan matching}

- traditional bathy mapping, urban lidar mapping
        - build submaps, look for rigid transformations 
        - do not build descriptors that can be matched in an invariant ``descriptor space"
	- good when decent initial estimate and dense range sensing are available

\subsection{Robust 2D image Features}

SIFT, SURF, ORB, Harris, yada yada yada
building descriptors that can be matched reliably independent of location estimate

Tricky: 3d features easier to understand after discussion of 2d image features, as they mostly grew out of CV features, but the data i'm dealing with is 3d, so might confuse reader as to how 2d point features matter in my context if they come first.


\subsection{3D Point Cloud Features}

Rusu papers, point cloud library work
Fast Point Feature Histograms 
Less mature generally than things like SIFT
Well suited for manmade structured environments, but less work has been done to prove robustness in natural terrain
    - good for future work: not sure these WON'T work for icebergs, but took stabs at it and they weren't super reliable ``out of the box


%The methods vary in the amount of human involvement required, the quality of sensing ava as well as how coupled the loop closure detection is from the solution method. At one extreme is SLAM with known correspondence, either from hand-labeled data or by having a ``map" comprising highly distinguishable features, such a the coded transponder beacons used int \cite{xponderslam?}. At the other end of the spectrum is fully unsupervised SLAM, where raw data is fed to the algorithm, and loop closure is detected automatically. This class of solution is desirable from an automation standpoint, as hand-labeling data or verifying corresondences can be a tedious and cumbersome task. However, without supervision, more sophisticated error checking and outlier rejection is required during optimization, which can increase computational complexity greatly. The ability to perform automatic loop closure detection can also rely heavily on the type and quality of sensing available.
%
%SLAM with known correspondence or ``supervised SLAM,"   The algorithm does not care how the correspondence was obtained and does not perform error checking to detect false matches. Humans are very good at outlier rejection, so this class of SLAM solution often depends on hand-labeled correspondence, or at least human verification of automatic correspondence, to eliminate false matches before optimizing. Another way to guard against false correspondence is to use highly identifiable ``map features," such as cooperative transponders that report their identity, as in \cite{?} 
%
%semi-supervised examples
%
%unknown correspondence examples
%
%As discussed above, traditional underwater bathymetric mapping tasks rely on having accurate enough inertial navigation that the correspondence problem is simply not an issue. Similarly, outdoor robotic mapping missions typically use GPS to provide an initial estimate of position, which is close enough to the true position for accurate (but sometimes brittle) scan registration techniques [\cite{OriginalGraphSLAM?} \cite{stanley?} \cite{ICP}].
%
%Robots performing SLAM in indoor environments do not have access to GPS signals. Because of this, they must either have very accurate odometry (like bathymetry mapping vehicles) or be able to 


\section{Summary}

A number of companies currently perform iceberg profiling using ship-based sonar, ROVs, and aerial and surface-based photogrammetry. These profiles are used to model wind and water drag to predict drift and also to aid in damage modeling and iceberg towing and management. 

Several efforts have been made to use AUVs to profile the keel of icebergs. The work presented in this dissertation builds on one of these efforts. Its contributions address issues with speed, scalability, and operational constraints of the prior method. To make these improvements, the problem is reformulated to fit within the framework of well-developed SLAM techniques. 

SLAM techniques require recognizing when an area has been traversed before. This correspondence problem can be solved by manually labels or autonomously. Generally the more information the robot is able to gather from the environment, the more this process can be automated. Much work has been done in the robotics and computer vision communiies to extract robust, identifiable features from range and image data. These features can be used by the robot to identify loop closure events.

